config BR2_PACKAGE_LIBPAM_PKCS11
	bool "libpam-pkcs11"
	depends on BR2_TOOLCHAIN_HAS_THREADS
	depends on BR2_USE_MMU # pcsc-lite -> fork()
	depends on !BR2_STATIC_LIBS
	depends on BR2_TOOLCHAIN_GCC_AT_LEAST_4_9 # pcsc-lite -> _Atomic keyword
	select BR2_PACKAGE_OPENSSL
	select BR2_PACKAGE_OPENSSL_FORCE_LIBOPENSSL
	select BR2_PACKAGE_PCSC_LITE
	help
	  The Linux-PAM login module for X.509 certificate
	  based user login.

	  https://github.com/OpenSC/pam_pkcs11

comment "libpam-pkcs11 needs a toolchain w/ threads, dynamic library, gcc >= 4.9"
	depends on BR2_USE_MMU
	depends on !BR2_TOOLCHAIN_HAS_THREADS || BR2_STATIC_LIBS || \
		!BR2_TOOLCHAIN_GCC_AT_LEAST_4_9
