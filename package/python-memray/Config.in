config BR2_PACKAGE_PYTHON_MEMRAY
	bool "python-memray"
	depends on BR2_USE_WCHAR # elfutils
	depends on !BR2_STATIC_LIBS # elfutils
	depends on BR2_TOOLCHAIN_HAS_THREADS # elfutils
	depends on BR2_TOOLCHAIN_HAS_SYNC_4 # elfutils/libdebuginfod
	depends on BR2_PACKAGE_LIBUNWIND_ARCH_SUPPORTS
	depends on BR2_INSTALL_LIBSTDCPP
	select BR2_PACKAGE_ELFUTILS
	select BR2_PACKAGE_ELFUTILS_LIBDEBUGINFOD
	select BR2_PACKAGE_LIBUNWIND
	select BR2_PACKAGE_LZ4
	select BR2_PACKAGE_PYTHON3_ZLIB
	select BR2_PACKAGE_PYTHON_JINJA2 # runtime
	select BR2_PACKAGE_PYTHON_RICH # runtime
	select BR2_PACKAGE_PYTHON_TEXTUAL # runtime
	help
	  A memory profiler for Python applications.

	  https://github.com/bloomberg/memray

comment "python-memray needs a toolchain w/ C++, dynamic library, threads, wchar"
	depends on BR2_PACKAGE_LIBUNWIND_ARCH_SUPPORTS
	depends on BR2_TOOLCHAIN_HAS_SYNC_4
	depends on !BR2_INSTALL_LIBSTDCPP || BR2_STATIC_LIBS || \
		!BR2_TOOLCHAIN_HAS_THREADS
